#textdomain wesnoth-dragonway

[scenario]
    name= _ "(#6) Hell"
    map_data="{~add-ons/Way_of_Dragon/maps/06hell}"
    victory_when_enemies_defeated=no
    id=06scen
    next_scenario=07scen

    [story]
        [part]
            story= _ "         "
	    background=data/add-ons/Way_of_Dragon/images/story/Logos/scen06logo.png
        [/part]
        [part]
            story= _ "Dalvich lured Virgil into a trap and now Virgil flew in some other dimension."
	    background=data/add-ons/Way_of_Dragon/images/story/In_hell_and_away.gif
        [/part]
        [part]
            story= _ "When he awoked, Virgil stand up and looked around. Lava was everywhere... Is it really a hell?"
	    background=data/add-ons/Way_of_Dragon/images/story/In_hell.jpg
        [/part]
    [/story]

#{TURNS 35 33 30}
{UNDERGROUND}


	{SCENARIO_MUSIC "northerners.ogg"}
	
 	{~add-ons/Way_of_Dragon/utils/blood_event.cfg}
# 	{~add-ons/Way_of_Dragon/utils/healthbottle_drink.cfg}
 	{~add-ons/Way_of_Dragon/utils/healthbottle_menu.cfg}


											# Sides description
    [side]
        side=1
        controller=human

        type=Bowman
        id=Virgil
        name= _ "Virgil"
        unrenamable=yes
        canrecruit=yes

	fog=yes	
	shroud=yes

	recruit=Fencer,Bowman,Thug,Footpad,Mage,Thief,Heavy Infantryman,Sergeant,Spearman
        team_name=Humans
        user_team_name= _ "Humans"
        {GOLD 0 0 0}
	{INCOME -2 -2 -2}
    [/side]

    [side]
        side=2
        controller=ai

        type=Ancient Lich
        id=Dalvich
        name= _ "Dalvich"
        unrenamable=yes
        canrecruit=yes

	recruit=Skeleton,Skeleton Archer,Ghost,Walking Corpse
        team_name=Undead
        user_team_name=_"Undead"
        {GOLD 0 0 0}
	{INCOME 0 0 0}
    [/side]

   [side]
        side=3
        controller=ai

	no_leader=yes

        team_name=Humans
        user_team_name=_"Humans"
        {GOLD 100 125 150}
	{INCOME 2 3 4}
    [/side]



										# Event Prestart

[event]
name=prestart

                {VARIABLE onlyonestep 0}
                {VARIABLE healthbottle 0}
                {VARIABLE talkdalvik 1}
                {VARIABLE talktorres 0}
                {VARIABLE talkYasher 0}
                {VARIABLE talkjeffry 0}
                {VARIABLE legend 0}


							# Right way in mini think trap

        [item]
            x,y=7,31
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle2.png
        [/item]
        [item]
            x,y=6,30
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle6.png
        [/item]
        [item]
            x,y=8,31
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle6.png
        [/item]
        [item]
            x,y=9,32
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle4.png
        [/item]
        [item]
            x,y=10,31
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle2.png
        [/item]
        [item]
            x,y=10,30
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle6.png
        [/item]
        [item]
            x,y=9,30
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle4.png
        [/item]
        [item]
            x,y=9,29
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle2.png
        [/item]
        [item]
            x,y=10,28
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle6.png
        [/item]
        [item]
            x,y=11,29
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-circle4.png
        [/item]


							# Other items
        [item]
            x,y=4,32
            image=items/stone-tablet.png
        [/item]
							
							# Jails

        [item]
            x,y=10,8
            image=scenery/gate-rusty-se.png
        [/item]
        [item]
            x,y=13,8
            image=scenery/gate-rusty-se.png
        [/item]
        [item]
            x,y=17,8
            image=scenery/gate-rusty-se.png
        [/item]
        [item]
            x,y=18,10
            image=scenery/gate-rusty-se.png
        [/item]

	[hide_unit]
            id=Virgil
	[/hide_unit]
	{FADE_TO_BLACK}
[/event]


											# First dialogues

[event]
name=start
	{FADE_IN}
			[delay]
			    time=500
			[/delay]


	[sound]
   		name=magic-dark-big.ogg
	[/sound]
	{FLASH_BLUE ()}
        [item]
            x,y=13,48
            image=data/add-ons/Way_of_dragon/images/terrain/summoning-center.png
        [/item]

			[delay]
			    time=500
			[/delay]
	[unhide_unit]
            id=Virgil
	[/unhide_unit]




	[message]
            id=Dalvich
            message= _ "Now you're in hell! And your soul will be here forever!"
	[/message]
	[message]
            id=Virgil
            message= _ "Already in hell? But I thought it would be at least a little hurt."
	[/message]
	[message]
            id=Dalvich
            message= _ "The pain you will feel later! But that pain you never dreamed of nightmare!"
	[/message]
	
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/laugh_hell.ogg
		[/sound]

        [objectives]
            [objective]
                description= _ "Explore the area"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]


[/event]



								# Wrong way = death!
[event]
	name=trap explode
        [store_locations]
            x=5,6,7,8,9,6,7,8,9,10,7,8,9,10,11,8,9,10,11,12,9,10,11,12,13
            y=30,30,31,31,32,29,30,30,31,31,29,29,30,30,31,28,29,29,30,30,28,28,29,29,30
            variable=exploding_hexes
        [/store_locations]

        {FOREACH exploding_hexes i}
            [sound]
                name=explosion.ogg
            [/sound]

            [item]
                x,y=$exploding_hexes[$i].x,$exploding_hexes[$i].y       
      halo=projectiles/fire-burst-small-1.png:50,projectiles/fire-burst-small-2.png:50,projectiles/fire-burst-small-3.png:50,projectiles/fire-burst-small-4.png:50,projectiles/fire-burst-small-5.png:50,projectiles/fire-burst-small-6.png:50,projectiles/fire-burst-small-7.png:50,projectiles/fire-burst-small-8.png:50,misc/blank-hex.png:1000000
            [/item]

            [terrain]
                x,y=$exploding_hexes[$i].x,$exploding_hexes[$i].y
                terrain=Ql
            [/terrain]

            [redraw]
            [/redraw]
        {NEXT i}

        	{CLEAR_VARIABLE exploding_hexes}
[/event]



								# Passage explode
[event]
	name=passage explode
        [store_locations]
            x=16
            y=13
            variable=exploding_hexes
        [/store_locations]

        {FOREACH exploding_hexes i}
            [sound]
                name=explosion.ogg
            [/sound]

            [item]
                x,y=$exploding_hexes[$i].x,$exploding_hexes[$i].y       
      halo=projectiles/fire-burst-small-1.png:50,projectiles/fire-burst-small-2.png:50,projectiles/fire-burst-small-3.png:50,projectiles/fire-burst-small-4.png:50,projectiles/fire-burst-small-5.png:50,projectiles/fire-burst-small-6.png:50,projectiles/fire-burst-small-7.png:50,projectiles/fire-burst-small-8.png:50,misc/blank-hex.png:1000000
            [/item]

            [terrain]
                x,y=$exploding_hexes[$i].x,$exploding_hexes[$i].y
                terrain=Ql
            [/terrain]

            [redraw]
            [/redraw]
        {NEXT i}

        	{CLEAR_VARIABLE exploding_hexes}
[/event]
										# Event Some Ispitanie

[event]
name=moveto
        [filter]
	    x=4
	    y=32
            id=Virgil
        [/filter]
	[sound]
   		name=magic-dark-big.ogg
	[/sound]
	{FLASH_GREEN ()}
	

                [terrain]
                    x=5
                    y=32
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]

        [item]
            x,y=5,29
            image=data/add-ons/Way_of_Dragon/images/items/rune-violet.png
        [/item]
        [item]
            x,y=6,28
            image=data/add-ons/Way_of_Dragon/images/items/rune-red-burning.png
        [/item]
        [item]
            x,y=7,28
            image=data/add-ons/Way_of_Dragon/images/items/rune-lightblue-small.png
        [/item]
[/event]

[event]
name=moveto
        [filter]
	    x=4
	    y=32
            id=Virgil
        [/filter]
        first_time_only=no
	[message]
            speaker=narrator
            message= _ "Inscription on the plate: 'The Road of Innocence' - be able to pass only one who got here ahead of time!"
            image=wesnoth-icon.png
	[/message]

		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=2
		[/modify_unit]
                {VARIABLE onlyonestep 1}

        [item]
            x,y=12,28
            image=items/gohere.png
        [/item]

        [objectives]
            [objective]
                description= _ "Pass the 'Road of Innocence'"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]
[/event]	

									# Events of right way
[event]
name=moveto
        [filter]
	    x=7
	    y=31
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=7,31
        [/remove_item]
        [item]
            x,y=7,31
            image=data/add-ons/Way_of_Dragon/images/items/rune-violet.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=6
	    y=30
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=6,30
        [/remove_item]
        [item]
            x,y=6,30
            image=data/add-ons/Way_of_Dragon/images/items/rune-red-burning.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]	
[event]
name=moveto
        [filter]
	    x=8
	    y=31
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=8,31
        [/remove_item]
        [item]
            x,y=8,31
            image=data/add-ons/Way_of_Dragon/images/items/rune-red-burning.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=9
	    y=32
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=9,32
        [/remove_item]
        [item]
            x,y=9,32
            image=data/add-ons/Way_of_Dragon/images/items/rune-lightblue-small.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=10
	    y=31
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=10,31
        [/remove_item]
        [item]
            x,y=10,31
            image=data/add-ons/Way_of_Dragon/images/items/rune-violet.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=10
	    y=30
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=10,30
        [/remove_item]
        [item]
            x,y=10,30
            image=data/add-ons/Way_of_Dragon/images/items/rune-red-burning.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=9
	    y=30
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=9,30
        [/remove_item]
        [item]
            x,y=9,30
            image=data/add-ons/Way_of_Dragon/images/items/rune-lightblue-small.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=9
	    y=29
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=9,29
        [/remove_item]
        [item]
            x,y=9,29
            image=data/add-ons/Way_of_Dragon/images/items/rune-violet.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=10
	    y=28
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=10,28
        [/remove_item]
        [item]
            x,y=10,28
            image=data/add-ons/Way_of_Dragon/images/items/rune-red-burning.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
	    x=11
	    y=29
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hell_rightway.ogg
		[/sound]
        [remove_item]
            x,y=11,29
        [/remove_item]
        [item]
            x,y=11,29
            image=data/add-ons/Way_of_Dragon/images/items/rune-lightblue-small.png
        [/item]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]


								# Event Exit from minitrap

[event]
name=moveto
        [filter]
            x=12
            y=28
            id=Virgil
        [/filter]
        [remove_item]
            x,y=12,28
        [/remove_item]
                [terrain]
                    x=5
                    y=32
                    terrain=Ur^Xo
                [/terrain]
                [redraw]
                [/redraw]

		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=5
			
		[/modify_unit]
                {VARIABLE onlyonestep 0}
        [item]
            x,y=13,26
            image=items/potion-red.png
        [/item]

        [item]
            x,y=16,12
            image=items/gohere.png
        [/item]

        [objectives]
            [objective]
                description= _ "Explore the area"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]
[/event]



[event]
        name=moveto
        [filter]
            x=13
	    y=26
	    id=Virgil
        [/filter]
        [remove_item]
            x,y=13,26
        [/remove_item]

          	        [chat]
          		  speaker=_ "Items"
         		  message= _ "Found a bottle of health."
			[/chat]

                {VARIABLE healthbottle 1}

#ifdef EASY
        [unit]
            type=Walking Corpse
            id=HellTraper1
            side=2
            x=17
            y=15
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
#endif
#ifdef NORMAL
        [unit]
            type=Walking Corpse
            id=HellTraper1
            side=2
            x=11
            y=19
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Walking Corpse
            id=HellTraper2
            side=2
            x=21
            y=21
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
#endif
#ifdef HARD
        [unit]
            type=Soulless
            id=HellTraper1
            side=2
            x=11
            y=19
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Soulless
            id=HellTraper2
            side=2
            x=21
            y=21
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
#endif

        [unit]
            type=Walking Corpse
            id=HellTraper3
            side=2
            x=12
            y=10
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

#ifdef NORMAL
        [unit]
            type=Walking Corpse
            id=HellTraper4
            side=2
            x=8
            y=7
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Walking Corpse
            id=HellTraper5
            side=2
            x=16
            y=9
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
#endif
#ifdef HARD
        [unit]
            type=Soulless
            id=HellTraper4
            side=2
            x=8
            y=7
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Walking Corpse
            id=HellTraper5
            side=2
            x=16
            y=9
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
#endif


                [terrain]
          	    x=12
           	    y=25
                    terrain=Ur
                [/terrain]
                [terrain]
          	    x=14
           	    y=25
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]


[/event]

									# Music of fight

[event]
        name=sighted
        [filter]
            id=HellTraper1
        [/filter]
		[music]
   			name=data/add-ons/Way_of_Dragon/music/solo_fight_theme.ogg
		[/music]
[/event]
[event]
        name=sighted
        [filter]
            id=HellTraper2
        [/filter]
		[music]
   			name=data/add-ons/Way_of_Dragon/music/solo_fight_theme.ogg
		[/music]
[/event]
[event]
        name=sighted
        [filter]
            id=HellTraper3
        [/filter]
		[music]
   			name=data/add-ons/Way_of_Dragon/music/solo_fight_theme.ogg
		[/music]
[/event]
[event]
        name=sighted
        [filter]
            id=HellTraper4
        [/filter]
		[music]
   			name=data/add-ons/Way_of_Dragon/music/solo_fight_theme.ogg
		[/music]
[/event]
[event]
        name=sighted
        [filter]
            id=HellTraper5
        [/filter]
		[music]
   			name=data/add-ons/Way_of_Dragon/music/solo_fight_theme.ogg
		[/music]
[/event]
[event]
        name=die
        [filter]
            id=HellTraper1
            id=HellTraper2
            id=HellTraper3
            id=HellTraper4
            id=HellTraper5
        [/filter]

		[music]
   			name=northerners.ogg
		[/music]
[/event]





							# In Jail
[event]
        name=moveto
        [filter]
            x=16
	    y=12
	    id=Virgil
        [/filter]
        [remove_item]
            x,y=16,12
        [/remove_item]
                                    [fire_event]
                                        name=passage explode
                                    [/fire_event]

                [terrain]
          	    x=15
           	    y=12
                    terrain=Urb
                [/terrain]
                [terrain]
          	    x=16
           	    y=11
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
        [unit]
            type=Duelist
            id=Dalvik
	    name=_ "Dalvik"
            unrenamable=yes
            side=3
            x=13
            y=7
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Longbowman
            id=Torres
	    name=_ "Torres"
            unrenamable=yes
            side=3
            x=18
            y=11
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Deathblade
            id=JeffryBlade
	    name=_ "Jeffrey-Blade"
            unrenamable=yes
            side=3
            x=11
            y=9
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]
        [unit]
            type=Yeti
            id=Yasher
            side=3
            x=16
            y=7
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]


	{MODIFY_UNIT id=Dalvik side 1}

		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]


        [objectives]
            [objective]
                description= _ "Talk with prisoners"
                condition=win
            [/objective]
            [objective]
                {ALTERNATIVE_OBJECTIVE_CAPTION}
                description= _ "Kill undead fighters"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]
[/event]



									# Dalvik in jail
[event]
name=moveto
first_time_only=no
        [filter]
            x=13
            y=9
            id=Virgil
        [/filter]

	{IF_VAR talkdalvik equals 1 (
                [then]
	[message]
            id=Dalvik
            message= _ "(raises his head and looks at Virgil)"
	[/message]
	[message]
            id=Virgil
            message= _ "Dalvik? It's you!"
	[/message]
	[message]
            id=Dalvik
            message= _ "... what a strange place ... Do not touch them ... These treasures are damned ... An ancient evil has awakened ... Beginning of the end ..."
	[/message]
	[message]
            id=Virgil
            message= _ "Dalvik! Do you hear me? Tell me, please! You have become an undead Lich. Now he calls himself Dalvich and is going to make the undead from all of living beings!"
	[/message]
	[message]
            id=Dalvik
            message= _ "Undead will rule the world ... And the living will envy dead ... Beginning of the end ..."
	[/message]
	[message]
            id=Virgil
            message= _ "Please, I really need help! How all this can be stopped?"
	[/message]
	[message]
            id=Dalvik
            message= _ "Legend about Dragon ... Forgotten in centuries ... But the only way to a better end ... The end of that beginning ..."
	[/message]
          	  [set_variable]
          	      name=talkdalvik
		      value=2
        	  [/set_variable]
          	  [set_variable]
          	      name=talktorres
		      value=1
        	  [/set_variable]

{MODIFY_UNIT id=Torres side 1}

		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]



        [objectives]
            [objective]
                description= _ "Talk with prisoners"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]
	[/then]
            )} 


	{IF_VAR talkdalvik equals 2 (
                [then]
	[message]
            id=Dalvik
            message= _ "Beginning of the end ... beginning of the end ..."
	[/message]
	[/then]
            )} 
[/event]


								# Torres in jail
[event]
name=moveto
first_time_only=no
        [filter]
            x=18
            y=9
            id=Virgil
        [/filter]

	{IF_VAR talktorres equals 1 (
                [then]
	[message]
            id=Torres
            message= _ "Dalvik! Virgil! Jeffrey! How I've missed you!"
	[/message]
	[message]
            id=Virgil
            message= _ "Torres! And you're here! Sorry, we were unable to come up with a help in time!"
	[/message]
	[message]
            id=Torres
            message= _ "The city is in danger! Rather, talk to head of the city guards about it! Otherwise, the end!"
	[/message]
	[message]
            id=Virgil
            message= _ "I got to the city! I said! We almost caught Dalvich!"
	[/message]
	[message]
            id=Torres
            message= _ "This danger is not only to Etinburg, but also for all over the world! Must be reported to the city, there is only one way to eliminate this threat!"
	[/message]
	[message]
            id=Virgil
            message= _ "What? What way? This is, as already mentioned Dalvik?"
	[/message]
	[message]
            id=Torres
            message= _ "Legend about Dragon. About the end of that beginning!"
	[/message]
          	  [set_variable]
          	      name=talktorres
		      value=2
        	  [/set_variable]
          	  [set_variable]
          	      name=talkyasher
		      value=1
        	  [/set_variable]

		{MODIFY_UNIT id=Yasher side 1}

		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]


        [objectives]
            [objective]
                description= _ "Talk with prisoners"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]
	[/then]
            )} 


	{IF_VAR talktorres equals 2 (
                [then]
	[message]
            id=Torres
            message= _ "Must be reported to the city! About danger!"
	[/message]
	[/then]
            )} 
[/event]

								# Yasher in jail
[event]
name=moveto
first_time_only=no
        [filter]
            x=17
            y=9
            id=Virgil
        [/filter]

	{IF_VAR talkyasher equals 1 (
                [then]
	[message]
            id=Virgil
            message= _ "(with surprise looks at the creature behind lattice)"
	[/message]
	[message]
            id=Yasher
            message= _ "You must to stop this nightmare!"
	[/message]
	[message]
            id=Virgil
            message= _ "You're speaking ... Yeti? Now nothing more will be surprised me!"
	[/message]
	[message]
            id=Yasher
            message= _ "Look at the prisoners! They're all damned! Because treasures is damned - they must be destroyed!"
	[/message]
	[message]
            id=Virgil
            message= _ "Destroy? But how if the one touch turns any living creature in the undead?"
	[/message]
	[message]
            id=Yasher
            message= _ "Legend about dragon! This is the only hope to put an end all of this!"
[option]
		message= _ "Learn the legend."
            [command]
          	  [set_variable]
          	      name=legend
		      value=1
        	  [/set_variable]
            [/command]
        [/option]
        [option]
		message= _ "Skip the legend."
            [command]
          	  [set_variable]
          	      name=legend
		      value=0
        	  [/set_variable]
            [/command]
        [/option]
	[/message]







	{IF_VAR legend equals 1 (
                [then]  
          	  [set_variable]
          	      name=talkyasher
		      value=0
        	  [/set_variable]
          	  [set_variable]
          	      name=talkjeffry
		      value=1
        	  [/set_variable]


	[message]
            id=Yasher
            message= _ "Once upon a time there were treasures, the appearance of which remains a mystery. There were years, decades, centuries - but the treasure no one could find. It was only a belief that it can find someone who knows where it is."
	[/message]
	[message]
            id=Yasher
            message= _ "But the treasures were damned - if to touch them, they will do it immediately turned into a Lich - a magician with a light that nobody of any power in this world was to stop!"
	[/message]
	[message]
            id=Yasher
            message= _ "Nobody but dragon! But to become a dragon, had to walk the Labyrinth of Terror in the Temple of the Gods and find a fountain of blood."
	[/message]
	[message]
            id=Yasher
            message= _ "According to legend, in the fountain flowing pure blood of the dragon. And drunk the blood turn into a winged lizard! Not immediately, but after a few cycles, which legend says nothing."
	[/message]
	[message]
            id=Yasher
            message= _ "In the end, there was a final battle between good and evil! Only this winged reptile was able to destroy the evil lich and return good and calm in our world!"
	[/message]
	[message]
            id=Virgil
            message= _ "Impressive legend. Thanks for the story! And now I've got to find a way how to get out of here!"
	[/message]




        [objectives]
            [objective]
                description= _ "Talk with prisoners"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]

		{MODIFY_UNIT id=JeffryBlade side 1}

		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]
            [/then]
            )} 




	{IF_VAR legend equals 0 (
                [then]   
          	  [set_variable]
          	      name=talkyasher
		      value=2
        	  [/set_variable]
          	  [set_variable]
          	      name=talkjeffry
		      value=1
        	  [/set_variable]
	[message]
            id=Virgil
            message= _ "And now I've got to find a way how to get out of here!"
	[/message]

        [objectives]
            [objective]
                description= _ "Talk with prisoners"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]

		{MODIFY_UNIT id=JeffryBlade side 1}

		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]    
            [/then]
            )} 

	[/then]
            )} 



	{IF_VAR talkyasher equals 2 (
                [then]
	[message]
            id=Yasher
            message= _ "Hurry up! No time to waste!"
	[/message]
	[/then]
            )} 
[/event]


								# Jeffry in Jail
[event]
name=moveto
        [filter]
            x=9
            y=8
            id=Virgil
        [/filter]
	{IF_VAR talkjeffry equals 1 (
                [then]


		[redraw]
			[filter]
				side=1
      			[/filter]	
			clear_shroud=yes
		[/redraw]


	[message]
            id=JeffryBlade
            message= _ "Virgil, I'm glad to see you!"
	[/message]
	[message]
            id=Virgil
            message= _ "(horror looks at living skeleton)"
	[/message]
	[message]
            id=JeffryBlade
            message= _ "It's me, Jeffrey!"
	[/message]
	[message]
            id=Virgil
            message= _ "But you look at who you looked like!"
	[/message]
	[message]
            id=JeffryBlade
            message= _ "Excuse me for trying to somehow help rather Torres unlike you ..."
	[/message]
	[message]
            id=Virgil
            message= _ "All right, I'm ..."
	[/message]
	[message]
            id=JeffryBlade
            message= _ "Out of order! I am a living skeleton! Torres and Dalvik dead! And you walk on hell unscathed at home!"
	[/message]
	[message]
            id=Virgil
            message= _ "You're right. But I found a way to stop it! I would just get out of here!"
	[/message]
	[message]
            id=JeffryBlade
            message= _ "You also decided that the story - is the solution? Although, okay. Still do not have other ideas. I'll help you escape."
	[/message]


			[delay]
			    time=500
			[/delay]
	[remove_item]
            x,y=10,8
        [/remove_item]
                [terrain]
          	    x=10
           	    y=8
                    terrain=Ur
                [/terrain]
                [terrain]
          	    x=4
           	    y=9
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]

        [item]
            x,y=8,2
            image=data/add-ons/Way_of_Dragon/images/items/exit.png
        [/item]


	[message]
            id=Virgil
            message= _ "How you have opened a lattice?"
	[/message]
	[message]
            id=JeffryBlade
            message= _ "Let's just say - I wormed his way into the confidence of his superiors. Tell the rest later."
	[/message]



        [item]
            x,y=4,9
            image=items/gohere.png
        [/item]

        [objectives]
            [objective]
                description= _ "Find a way to escape from hell"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Virgil"
                condition=lose
            [/objective]
#            [objective]
#                description= _ "Death of Jeffrey-Blade"
#                condition=lose
#            [/objective]
#            [objective]
#                description= _ "Turns run out"
#                condition=lose
#		show_turn_counter=yes
#            [/objective]
        [/objectives]

	[/then]
            )} 

[/event]


								# Way build
[event]
name=moveto
        [filter]
            x=13
            y=47
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=13
           	    y=46
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=13
            y=46
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=13
           	    y=45
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=13
            y=45
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=13
           	    y=44
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=13
            y=44
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=14
           	    y=43
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=14
            y=43
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=15
           	    y=43
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=15
            y=43
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=16
           	    y=42
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=16
            y=42
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=17
           	    y=42
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=17
            y=42
            id=Virgil
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=17
           	    y=41
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]



						# Way build 2
[event]
name=moveto
        [filter]
            x=4
            y=9
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
        [remove_item]
            x,y=4,9
        [/remove_item]
                [terrain]
          	    x=3
           	    y=10
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=3
            y=10
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=2
           	    y=9
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=2
            y=9
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=2
           	    y=8
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=2
            y=8
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=2
           	    y=7
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=2
            y=7
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=2
           	    y=6
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=2
            y=6
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=2
           	    y=5
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=2
            y=5
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=3
           	    y=5
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=3
            y=5
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=4
           	    y=4
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=4
            y=4
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=5
           	    y=5
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=5
            y=5
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=6
           	    y=5
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=6
            y=5
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=7
           	    y=6
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]
[event]
name=moveto
        [filter]
            x=7
            y=6
            side=1
        [/filter]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/hellplat_move.ogg
		[/sound]
                [terrain]
          	    x=8
           	    y=5
                    terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
[/event]


#==========================================end events===============================



							# Event wrong way
[event]
name=moveto
        [filter]
            x=5,6,7,8,9,7,8,11,8,10,11,12,12,13
            y=30,29,30,30,31,29,29,31,28,29,30,30,29,30
            id=Virgil
        [/filter]

                [terrain]
      		      x=5,6,7,8,9,6,7,8,9,10,7,8,9,10,11,8,9,10,11,12,9,10,11,12,13
          	      y=30,30,31,31,32,29,30,30,31,31,29,29,30,30,31,28,29,29,30,30,28,28,29,29,30
                      terrain=Ur
                [/terrain]
                [redraw]
                [/redraw]
        [remove_item]
            x,y=7,31
        [/remove_item]
        [remove_item]
            x,y=6,30
        [/remove_item]
        [remove_item]
            x,y=8,31
        [/remove_item]
        [remove_item]
            x,y=9,32
        [/remove_item]
        [remove_item]
            x,y=10,31
        [/remove_item]
        [remove_item]
            x,y=10,30
        [/remove_item]
        [remove_item]
            x,y=9,30
        [/remove_item]
        [remove_item]
            x,y=9,29
        [/remove_item]
        [remove_item]
            x,y=10,28
        [/remove_item]
        [remove_item]
            x,y=11,29
        [/remove_item]


	[message]
            id=Dalvich
            message= _ "Pain and suffering are waiting for you!"
	[/message]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/laugh_hell2.ogg
		[/sound]
                                    [fire_event]
                                        name=trap explode
                                    [/fire_event]
		[sound]
   			name=dwarf-die-2.ogg
		[/sound]
		[kill]
		    side=1
            		x=5,6,7,8,9,7,8,11,8,10,11,12,12,13
          		y=30,29,30,30,31,29,29,31,28,29,30,30,29,30
		    animate=yes
		[/kill]
        [message]
            speaker=narrator
            message= _ "The main hero was killed!"
            image=wesnoth-icon.png
	[/message]
        [endlevel]
            result=defeat
        [/endlevel]
[/event]	

								# Event - next scenario

[event]
	name=moveto
	[filter]
	    x=8
	    y=2
	    id=Virgil
	[/filter]
	[remove_item]
            x,y=8,2
        [/remove_item]
        [item]
            x,y=8,2
            image=data/add-ons/Way_of_Dragon/images/terrain/summoning-center.png
        [/item]
	[sound]
   		name=magic-dark-big.ogg
	[/sound]
	{FLASH_BLUE ()}

	[modify_side]
	    side=3
  	    team_name=Undead
    	    user_team_name=_"Undead"
	[/modify_side]

	[hide_unit]
            id=Virgil
	[/hide_unit]
	[hide_unit]
            id=JeffryBlade
	[/hide_unit]

	{FADE_TO_BLACK}
	[place_shroud]
            side=1
            x=1-26
            y=1-50
	[/place_shroud]

			[delay]
			    time=500
			[/delay]
        [endlevel]
            result=victory
        [/endlevel]
{MODIFY_UNIT id=Dalvik side 3}
{MODIFY_UNIT id=Torres side 3}
{MODIFY_UNIT id=Yasher side 3}
[/event]
											# death events

[event]
        name=die
        first_time_only=no
        [filter]
            id=JeffryBlade
        [/filter]
        [message]
            id=JeffryBlade
            message= _ "What does not kill - makes me stronger!"
        [/message]

	[sound]
   		name=magic-dark-big.ogg
	[/sound]
	{FLASH_BLUE ()}

			{FULL_HEAL id=JeffryBlade}
[/event]
[event]
        name=die
        [filter]
            id=Virgil
        [/filter]
        [message]
            id=Virgil
            message= _ "Eeeeeyyyy..."
        [/message]
	[message]
            id=Dalvich
            message= _ "You want pain? You got it!"
	[/message]
		[sound]
   			name=data/add-ons/Way_of_Dragon/music/sounds/laugh_hell2.ogg
		[/sound]
        [message]
            speaker=narrator
            message= _ "The main hero was killed!"
            image=wesnoth-icon.png
	[/message]
        [endlevel]
            result=defeat
        [/endlevel]
[/event]
[event]
        name=time over
        [sound]
            name=ambient/ship.ogg
        [/sound]
        [message]
            speaker=narrator
            message= _ "In hell frequent volcanic eruptions. You're too late - lava filled all area."
            image=terrain/unwalkable/lava.png
        [/message]
        [message]
            speaker=narrator
            message= _ "Turns run out!"
            image=wesnoth-icon.png
	[/message]
        [endlevel]
            result=defeat
        [/endlevel]
[/event]



					
				# Event only one moves in trap


[event]
name=side 1 turn refresh
        first_time_only=no
		{IF_VAR onlyonestep equals 1 (
                [then]
		[modify_unit]
			[filter]
				id=Virgil
			[/filter]
  			moves=1
		[/modify_unit]
                [/then]
            )} 
[/event]




[/scenario]
